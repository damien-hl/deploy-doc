(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{372:function(e,a,s){e.exports=s.p+"assets/img/apache_folders.49377df1.jpg"},373:function(e,a,s){e.exports=s.p+"assets/img/virtual_host.87258718.jpg"},388:function(e,a,s){"use strict";s.r(a);var t=s(42),r=Object(t.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"serveur-web-apache-partie-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#serveur-web-apache-partie-2"}},[e._v("#")]),e._v(" Serveur Web Apache - Partie 2")]),e._v(" "),t("h2",{attrs:{id:"configuration-d-apache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuration-d-apache"}},[e._v("#")]),e._v(" Configuration d'Apache")]),e._v(" "),t("p",[e._v("Avant de configurer spécifiquement le projet, il est nécessaire d'effectuer quelques modifications à la configuration d'Apache.")]),e._v(" "),t("p",[e._v("Tout d'abord, sur votre serveur, passez en super utilisateur "),t("code",[e._v("root")]),e._v(" et activez le module "),t("code",[e._v("rewrite")]),e._v(" d'Apache :")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("a2enmod rewrite\n")])])]),t("p",[e._v("Ajoutez maintenant le dossier "),t("code",[e._v("/home/<nom_utilisateur>/www")]),e._v(" dans la liste des dossiers gérés par Apache (Figure 2)\nPour cela, ouvrez le fichier "),t("code",[e._v("/etc/apache2/apache2.conf")]),e._v(" et modifiez les lignes indiquées :")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("div",{staticClass:"highlight-lines"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("div",{staticClass:"highlighted"},[e._v(" ")]),t("div",{staticClass:"highlighted"},[e._v(" ")]),t("div",{staticClass:"highlighted"},[e._v(" ")]),t("div",{staticClass:"highlighted"},[e._v(" ")]),t("div",{staticClass:"highlighted"},[e._v(" ")]),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br")]),t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Sets the default security model of the Apache2 HTTPD server. It does")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# not allow access to the root filesystem outside of /usr/share and /var/www.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The former is used by web applications packaged in Debian,")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# the latter may be used for local directories served by the web server. If")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# your system is serving content from a sub-directory in /srv you must allow")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# access here, or in any related virtual host.")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Directory /"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n        Options FollowSymLinks\n        AllowOverride None\n        Require all denied\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/Directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Directory /usr/share"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n        AllowOverride None\n        Require all granted\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/Directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Directory /var/www/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n        Options Indexes FollowSymLinks\n        AllowOverride None\n        Require all granted\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/Directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("Directory /home/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("nom_utilisateur"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/www/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n        Options Indexes FollowSymLinks\n        AllowOverride None\n        Require all granted\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("/Directory"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#<Directory /srv/>")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       Options Indexes FollowSymLinks")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       AllowOverride None")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       Require all granted")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#</Directory>")]),e._v("\n")])])]),t("p",[t("img",{attrs:{src:s(372),alt:"Liste des dossiers gérés par Apache"}}),e._v(" "),t("em",[e._v("Figure 2 : Liste des dossiers gérés par Apache")])]),e._v(" "),t("p",[e._v("Redémarrez le service Apache")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("systemctl restart apache2\n")])])]),t("p",[e._v("Vous allez maintenant créer un virtual host pour votre projet.")]),e._v(" "),t("p",[e._v("Copiez la configuration du site par défaut d'Apache, nommez-la "),t("code",[e._v("001-<nom_du_projet>")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/001-"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("nom_du_projet"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(".conf\n")])])]),t("p",[e._v("Éditez ce fichier avec nano")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /etc/apache2/sites-available/001-"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("nom_du_projet"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(".conf\n")])])]),t("p",[e._v("Modifiez-le comme ceci (Figure 1)")]),e._v(" "),t("div",{staticClass:"language-markup extra-class"},[t("pre",{pre:!0,attrs:{class:"language-markup"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("VirtualHost")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("*:")]),e._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n        # Entrez en dessous votre nom de domaine, exemple : chantemelse.com\n        ServerName chantemelse.com \n        # Entrez un alias qui enverra sur votre nom de domaine, exemple : www.chantemelse.com\n        ServerAlias www.chantemelse.com\n        \n        # Si vous avez une adresse email à afficher en cas de problème, entrez-la ici\n        ServerAdmin webmaster@chantemelse.com  \n        # Indiquez le dossier dans lequel se trouve votre projet front\n        DocumentRoot /home/ubuntu/www/chantemelse/front\n\n        # Réécriture d'URL pour les Single Page Application\n        RewriteEngine on\n        RewriteCond %{REQUEST_FILENAME} -s [OR]\n        RewriteCond %{REQUEST_FILENAME} -l [OR]\n        RewriteCond %{REQUEST_FILENAME} -d\n        RewriteRule ^.*$ - [NC,L]\n        \n        RewriteRule ^(.*) /index.html [NC,L]\n\n        # Si vous souhaitez modifier l'emplacement des logs de ce virtual host\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("VirtualHost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),t("p",[t("img",{attrs:{src:s(373),alt:"Configuration du virtual host du projet"}}),e._v(" "),t("em",[e._v("Figure 1 : Configuration du virtual host du projet")])]),e._v(" "),t("p",[e._v("Sauvegardez et testez cette configuration, s'il y a des erreurs de syntaxe, celles-ci seront indiquées")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("apachectl configtest\n")])])]),t("p",[e._v("Désactivez le site par défaut et activez votre projet")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("a2disite 000-default.conf\na2ensite 001-chantemelse.conf\n")])])]),t("p",[e._v("Rechargez maintenant le service Apache")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("systemctl reload apache2\n")])])]),t("p",[e._v("Ouvrez votre navigateur et entrez l'adresse IP du serveur, le site devrait s'afficher.")])])}),[],!1,null,null,null);a.default=r.exports}}]);