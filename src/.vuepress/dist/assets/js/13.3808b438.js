(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{324:function(e,a,t){e.exports=t.p+"assets/img/virtual_host.87258718.jpg"},391:function(e,a,t){"use strict";t.r(a);var s=t(42),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"serveur-web-apache-partie-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serveur-web-apache-partie-2"}},[e._v("#")]),e._v(" Serveur Web Apache - Partie 2")]),e._v(" "),s("h2",{attrs:{id:"configuration-d-apache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-d-apache"}},[e._v("#")]),e._v(" Configuration d'Apache")]),e._v(" "),s("p",[e._v("Avant de configurer spécifiquement le projet, il est nécessaire d'effectuer quelques modifications à la configuration d'Apache.")]),e._v(" "),s("p",[e._v("Tout d'abord, sur votre serveur, passez en super utilisateur "),s("code",[e._v("root")]),e._v(" et activez le module "),s("code",[e._v("rewrite")]),e._v(" d'Apache :")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("a2enmod rewrite\n")])])]),s("p",[e._v("Créez un lien symbolique du projet front dans le dossier "),s("code",[e._v("/var/www")]),e._v(" :")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("ln")]),e._v(" -s /home/ubuntu/www/chantemelse/front /var/www/chantemelse\n")])])]),s("p",[e._v("Redémarrez le service Apache")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("systemctl restart apache2\n")])])]),s("p",[e._v("Vous allez maintenant créer un virtual host pour votre projet.")]),e._v(" "),s("p",[e._v("Copiez la configuration du site par défaut d'Apache, nommez-la "),s("code",[e._v("001-chantemelse")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/001-chantemelse.conf\n")])])]),s("p",[e._v("Éditez ce fichier avec nano")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("nano")]),e._v(" /etc/apache2/sites-available/001-chantemelse.conf\n")])])]),s("p",[e._v("Modifiez-le comme ceci (Figure 1)")]),e._v(" "),s("div",{staticClass:"language-markup extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markup"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("VirtualHost")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("*:")]),e._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n        # Entrez en dessous votre nom de domaine, exemple : chantemelse.com\n        ServerName chantemelse.com \n        # Entrez un alias qui enverra sur votre nom de domaine, exemple : www.chantemelse.com\n        ServerAlias www.chantemelse.com\n        \n        # Si vous avez une adresse email à afficher en cas de problème, entrez-la ici\n        ServerAdmin webmaster@chantemelse.com  \n        # Indiquez le dossier dans lequel se trouve votre projet front\n        DocumentRoot /var/www/chantemelse\n\n        # Changement du comportement d'Apache pour le répertoire\n        <Directory /var/www/chantemelse>\n            Options -Indexes\n            AllowOverride all\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("Directory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n\n        # Si vous souhaitez modifier l'emplacement des logs de ce virtual host\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("VirtualHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),s("p",[s("img",{attrs:{src:t(324),alt:"Configuration du virtual host du projet"}}),e._v(" "),s("em",[e._v("Figure 1 : Configuration du virtual host du projet")])]),e._v(" "),s("p",[e._v("Sauvegardez et testez cette configuration, s'il y a des erreurs de syntaxe, celles-ci seront indiquées")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("apachectl configtest\n")])])]),s("p",[e._v("Désactivez le site par défaut et activez votre projet")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("a2disite 000-default.conf\na2ensite 001-chantemelse.conf\n")])])]),s("p",[e._v("Rechargez maintenant le service Apache")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("systemctl reload apache2\n")])])]),s("p",[e._v("Le projet front étant une application SPA "),s("code",[e._v("Single Page Application")]),e._v(", il peut être nécessaire de faire appel à la réécriture d'URL d'Apache via un fichier "),s("code",[e._v(".htaccess")]),e._v(" pour que les routes définies dans l'application soient appelées correctement.\nPour cela, quittez d'abord le mode super utilisateur.")]),e._v(" "),s("p",[e._v("Créez un fichier "),s("code",[e._v(".htaccess")]),e._v(" dans "),s("code",[e._v("/home/ubuntu/www/chantemelse/front")]),e._v(".")]),e._v(" "),s("p",[e._v("Éditez ce fichier avec nano comme cela (Figure 2)")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("RewriteEngine On\nRewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]\nRewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d\nRewriteRule ^ - [L]\n\nRewriteRule ^ /index.html\n")])])]),s("p",[s("img",{attrs:{src:t(324),alt:"Fichier .htaccess"}}),e._v(" "),s("em",[e._v("Figure 2 : Fichier .htaccess")])]),e._v(" "),s("p",[e._v("Ouvrez votre navigateur et entrez l'adresse IP du serveur, le site devrait s'afficher.")])])}),[],!1,null,null,null);a.default=r.exports}}]);